<!DOCTYPE html>

<!-- Copyright (c) 2021 Ruofan Chen, Samm Du, Nada Eldin, Shalev Lifshitz

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at:

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. -->

<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AutoDirect</title>
    <!--[if IE]><link rel="shortcut icon" href="assets/icons/favicon.ico"><![endif]-->
    <link rel="apple-touch-icon" href="assets/icons/favicon_180.png">
    <link rel="icon" href="assets/icons/favicon_196.png">
    <meta name="theme-color" content="#36cf9b"/>
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/minireset.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/index.css">
    <!-- Scripts -->
    <script type="text/javascript" src="js/mustache-4.2.0.min.js" defer></script>
    <script type="text/javascript" src="js/main.js" defer></script>
    <script type="text/javascript" src="js/api.js" defer></script>
    <script type="text/javascript" src="js/discover.js" defer></script>
</head>
<body>
    <main>
        <aside>
            <section class="card border-thin sec-inputs">
                <header>
                    <img src="assets/icons/senso_logo_text_dark-min.svg" alt="senso-logo">
                    <h1><a href="/">AutoDirect</a></h1>
                </header>
                <article id="side-agreement">
                    <div class="inset-content">
                        <h3>You will be able to:</h3>
                        <ul>
                            <li>Browse cars that you can afford</li>
                            <li>Get exclusive loan offers at competitive rates tailored for you</li>
                        </ul>
                        <h3>You need to:</h3>
                        <ul>
                            <li>Agree to share your credit proÔ¨Åle with us</li>
                            <li>Agree to our terms of service</li>
                        </ul>
                        <button type="button" name="login" class="btn-red" onclick="userLogin();">
                            Agree & continue
                        </button>
                    </div>
                </article>
                <article id="side-params" style="display: none;">
                    <form id="form-finanicals" onsubmit="submitSearch(); return false;">
                        <div class="inset-content">
                            <label for="budget_mo"><h3>Monthly budget:</h3></label>
                            <input class="round-empty-pill" type="number" name="budget_mo" placeholder="300.00">
                            <label for="down_payment"><h3>Down payment:</h3></label>
                            <input class="round-empty-pill" type="number" name="down_payment" placeholder="1000.00">
                        </div>
                        <button type="submit" name="updateFinancials" class="btn-green rounded-bottom">
                            Find your car
                        </button>
                    </form>
                </article>
            </section>
            <section class="card border-thin sec-claimed-offers" id="claimedOffersWidget" style="display: none;">
                <header class="region-dark">
                    <img src="./assets/icons/heart-filled-red-min.svg" alt="">
                    <h3>Your loan offers</h3>
                </header>
                <ul class="loan-offers" id="loanOffersContainer">
                </ul>
                <a id="offersDetailsLink" class="round-empty-pill" href="./details.html" style="visibility: hidden;">
                    See all offer details
                </a>
            </section>
        </aside>
        <section>
            <nav class="search-bar card region-dark">
                <span class="sort-combo">
                    <button type="button" name="sortOrder" id="sortOrder" onclick="toggleSortOrder();">
                            <img id="sortIcon" src="assets/icons/sort-top-down-min.svg" alt="Sort by" />
                    </button>
                    <select name="sortBy" id="sortBy" onchange="setSortBy();">
                        <option value="price" selected>Retail price</option>
                        <option value="apr">Interest rate</option>
                        <option value="payment_mo">Monthly payment</option>
                        <option value="total_sum">Total cost</option>
                        <option value="term_length">Loan term length</option>
                    </select>
                </span>
                <form class="search-container" onsubmit="submitSearch(); return false;">
                    <button type="submit">
                        <img src="assets/icons/search-icon-min.svg" alt="Search" />
                    </button>
                    <input type="text" id="searchBox">
                </form>
            </nav>
            <div class="cars-container" id="carsContainer" onload="demoAddDummyCars();">
            </div>
        </section>
    </main>

    <footer class="region-dark">
        <div class="footer-spacer"></div>
        <section class="license">
            <article>
                <p><b>Copyright &copy; 2021 Ruofan Chen, Samm Du, Nada Eldin, Shalev Lifshitz</b></p>
                <p>
                    Licensed under the Apache License, Version 2.0 (the "License");
                    you may not use this file except in compliance with the License.
                    You may obtain a copy of the License at:
                </p>
                <p class="indented">
                    <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" class="link-light" rel="noopener">
                        https://www.apache.org/licenses/LICENSE-2.0
                    </a>
                </p>
                <p>
                    Unless required by applicable law or agreed to in writing, software
                    distributed under the License is distributed on an "AS IS" BASIS,
                    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                    See the License for the specific language governing permissions and
                    limitations under the License.
                </p>
            </article>
        </section>
        <aside class="attrib">
            <div class="attrib-child">
                <h3>Source code at:</h3>
                <a href="https://github.com/TLI-Group-1" target="_blank" rel="noopener">
                    <img src="assets/icons/github_button-min.svg" alt="GitHub" class="btn-shifty">
                </a>
            </div>
            <div class="attrib-child">
                <h3>Powered by:</h3>
                <a href="https://senso.ai/" target="_blank" rel="noopener">
                    <img src="assets/icons/senso_logo_text_light-min.svg" alt="Senso.AI" class="btn-shifty">
                </a>
            </div>
        </aside>
        <div class="footer-spacer"></div>
    </footer>

    <!-- Mustache templates below; rendered in JavaScript -->
    <script type="text/html" id="tmpl_CarOffer">
        <div class="car-offer card border-thin">
            <img src="assets/img/car-1.jpg" alt="Car Picture">
            <article>
                {{&car_info}}
                {{&loan_info}}
            </article>
            {{&button}}
        </div>
    </script>
    <script type="text/html" id="tmpl_CarOfferCarInfo">
        <div class="car-info-pair">
            <h5>Make:</h5>
            <span>{{make}}</span>
        </div>
        <div class="car-info-pair">
            <h5>Model:</h5>
            <span>{{model}}</span>
        </div>
        <div class="car-info-pair">
            <h5>Year:</h5>
            <span>{{year}}</span>
        </div>
        <div class="car-info-pair">
            <h5>Usage:</h5>
            <span>{{kms}} km</span>
        </div>
        <div class="car-info-pair">
            <h5>Retail price:</h5>
            <span>&#36;{{price}}</span>
        </div>
        <div class="car-info-pair" style="visibility: hidden;"></div>
    </script>
    <script type="text/html" id="tmpl_CarOfferLoanInfo">
        <div class="car-info-pair">
            <h5>Interest rate:</h5>
            <span class="green-text">{{apr}}&#37;</span>
        </div>
        <div class="car-info-pair">
            <h5>You pay:</h5>
            <span class="green-text">&#36;{{payment_mo}}/mo</span>
        </div>
        <div class="car-info-pair">
            <h5>Loan term:</h5>
            <span class="green-text">{{loan_term}} months</span>
        </div>
        <div class="car-info-pair">
            <h5>Total cost:</h5>
            <span class="green-text">&#36;{{total_sum}}</span>
        </div>
    </script>
    <script type="text/html" id="tmpl_CarOfferBtnUnavailable">
        <button type="button" class="region-gray rounded-bottom claim-unavailable">
            Agree to view offers
        </button>
    </script>
    <script type="text/html" id="tmpl_CarOfferBtnAvailable">
        <button type="button" class="claim-btn rounded-bottom" name="{{id}}" onclick="claimOffer(this.name);">
            <span class="btn-dark-blue claim-text">Claim this offer</span>
            <span class="btn-red bg-heart-empty claim-heart"></span>
        </button>
    </script>
    <script type="text/html" id="tmpl_LoanOffer">
        <li class="loan-offer-entry">
            <a href="./details.html?user_id={{user_id}}&offerSelected={{offer_id}}">
                <img src="./assets/img/car-1.jpg" alt="">
                <div class="loan-offer-summary">
                    <span class="offer-car-info">{{make}} {{model}} {{year}}</span>
                    <span class="offer-loan-info">${{payment_mo}}/mo &middot; {{loan_term}} months &middot; {{apr}}%</span>
                </div>
            </a>
        </li>
    </script>
</body>
</html>
